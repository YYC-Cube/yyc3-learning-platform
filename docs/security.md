# 安全指南

## 依赖更新

### Next.js 安全更新

本项目已更新到 Next.js 15.5.7+，修复了以下关键安全漏洞：

#### CVE-2025-66478 (CVSS 10.0)

- **描述**: React Server Components (RSC) 协议中的远程代码执行漏洞
- **影响版本**: Next.js 15.x, 16.x 和部分 14.x canary 版本
- **修复版本**: 15.5.7+, 16.0.7+
- **状态**: ✅ 已修复

### 定期更新检查

建议每月检查依赖更新：

\`\`\`bash

# 检查过期的依赖

npm outdated

# 更新所有依赖到最新兼容版本

npm update

# 检查安全漏洞

npm audit

# 自动修复安全漏洞

npm audit fix
\`\`\`

## 最佳安全实践

### 1. 环境变量管理

- 永远不要提交 `.env` 文件到版本控制
- 使用 `.env.example` 作为模板
- 在生产环境使用环境变量管理服务

### 2. 数据库安全

- 使用参数化查询防止 SQL 注入
- 实施行级安全策略 (RLS)
- 定期备份数据库
- 使用强密码和最小权限原则

### 3. 身份认证

- 使用 bcrypt 加密密码 (成本因子 >= 10)
- 实施 JWT token 过期机制
- 使用 HTTP-only cookies 存储敏感 token
- 实施多因素认证 (MFA)

### 4. API 安全

- 实施速率限制
- 验证所有输入数据
- 使用 CORS 限制跨域请求
- 实施 API 密钥认证

### 5. 前端安全

- 实施内容安全策略 (CSP)
- 使用 HTTPS
- 防止 XSS 攻击
- 实施 CSRF 保护

## 安全审计

### 自动化安全扫描

\`\`\`bash

# 运行安全审计

npm run security-audit

# 检查类型安全

npm run type-check

# 代码质量检查

npm run lint
\`\`\`

## 报告安全问题

如果发现安全漏洞，请通过以下方式报告：

1. **不要公开披露漏洞**
2. 发送邮件至: <security@example.com>
3. 提供详细的漏洞描述和重现步骤
4. 我们将在 48 小时内响应

## 安全更新日志

### 2025-01-XX

- ✅ 更新 Next.js 到 15.5.7+ (修复 CVE-2025-66478)
- ✅ 更新所有依赖到最新安全版本
- ✅ 添加依赖版本范围约束

### 定期维护

- 每月检查依赖更新
- 每季度进行安全审计
- 持续监控安全公告
